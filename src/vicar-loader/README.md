# vicar-loader

Utility for loading Vicar file data formats as described [here](https://www-mipl.jpl.nasa.gov/external/VICAR_file_fmt.pdf).

<!--{example vicar-loader.js}-->
<!--{package-dependencies ./package.json}-->

# Use

```js
import { VicarLoader } from '@gov.nasa.jpl.honeycomb/vicar-loader';
const loader = new VicarLoader();
loader.load('./path/to/file.vicar').then(texture => {

    // ... vicar file contents as data texture ...

});
```

# API

<!-- START_AUTOGENERATED_DOCS -->
## VicarLoader

Three.js implementation of VicarLoaderBase.

_extends VicarLoaderBase_

### manager<a name="VicarLoader#manager"></a>

```js
manager : LoadingManager = DefaultLoadingManager
```



### constructor

```js
constructor( manager : LoadingManager = DefaultLoadingManager ) : void
```

### load<a name="VicarLoader#load"></a>

```js
load( url : String, texture : DataTexture = new DataTexture() ) : DataTexture
```

Loads and parses the Vicar file and returns a DataTexture. If a DataTexture is passed into
the function the data is applied to it.

### parse<a name="VicarLoader#parse"></a>

```js
parse( buffer : Uint8Array | ArrayBuffer, texture : DataTexture = new DataTexture() ) : DataTexture
```

Parses the contents of the given Vicar file and returns a texture with the
contents. The content of the arrays is mapped to a 255 bit color value
based on the max values.

## VicarResult

### labels<a name="VicarResult#labels"></a>

```js
labels : Array<{ isLabelGroup : Boolean, name : String, value : any }>
```


The set of header labels in the file. This includes both the header
and EOL extension labels if present.


### data<a name="VicarResult#data"></a>

```js
data : TypedArray
```


The data of the file in a typed array of the type defined by the
`labels.FORMAT` field with the binary prefix data stripped out.

The array is of length `width * height * depth`. If [complex](#VicarResult#complex)
is true then the length will be `width * height * depth * 2` to account
for the imaginary and real components of the values.


### width<a name="VicarResult#width"></a>

```js
width : Number
```


The row stride of the image as defined by the `labels.N1` field.


### height<a name="VicarResult#height"></a>

```js
height : Number
```


The height of the image as defined by the `labels.N2` field.


### depth<a name="VicarResult#depth"></a>

```js
depth : Number
```


The depth of the image as defined by the `labels.N3` field.


### prefixData<a name="VicarResult#prefixData"></a>

```js
prefixData : Uint8Array
```


The binary prefix data for each row defined at a `Uint8Array`. The
array is of length `width * prefixWidth`.


### prefixWidth<a name="VicarResult#prefixWidth"></a>

```js
prefixWidth : Number
```


The width of the binary prefix as defined by the `labels.NBB` field.


### complex<a name="VicarResult#complex"></a>

```js
complex : Boolean
```


Whether the values are complex or not as dependent on the `labels.FORMAT`
field. This will be `true` if `labels.FORMAT` is `COMP` or `COMPLEX`.


## VicarLoaderBase

Class for loading and parsing Vicar files

### fetchOptions<a name="VicarLoaderBase#fetchOptions"></a>

```js
fetchOptions : Object = { credentials: 'same-origin' }
```


Fetch options for loading the file.


### load<a name="VicarLoaderBase#load"></a>

```js
load( url : String ) : Promise<VicarResult>
```

Loads and parses the Vicar file. The promise resolves with the returned
data from the [parse](#VicarLoaderBase#parse) function.

### parse<a name="VicarLoaderBase#parse"></a>

```js
parse( buffer : Uint8Array | ArrayBuffer ) : VicarResult
```

Parses the contents of the given Vicar file and returns an object describing
the telemetry.


<!-- END_AUTOGENERATED_DOCS -->
